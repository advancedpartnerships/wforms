<!DOCTYPE HTML>
<html lang="en-US">
<head>

    <title>Test Recursive Conditionals</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <script type="text/javascript" src="jsunit/app/jsUnitCore.js"></script>

    <link href="../css/wforms-jsonly.css" type="text/css" rel="stylesheet" />
    <link href="../css/wforms-layout.css" type="text/css" rel="stylesheet" />

    <script type="text/javascript" src="../lib/base2/v1.0.1/src/base2.js"></script>
    <script type="text/javascript" src="../lib/base2/v1.0.1/src/base2-dom.js"></script>
    <script type="text/javascript" src="../wforms_core.js"></script>
    <script type="text/javascript" src="../wforms_repeat.js"></script>
    <script type="text/javascript" src="../wforms_condition.js"></script>
    <script type="text/javascript" src="../wforms_validation.js"></script>
    <script type="text/javascript" src="../wforms_paging.js"></script>
    <script type="text/javascript" src="../localization/localization-en_US.js"></script>


    <script type="text/javascript">
        var bInstance = null;
        var form = null;

        var checkTimer = setInterval(function(){
            if(wFORMS.initialized === true){
                clearInterval(checkTimer);
                setUpPageStatus = 'complete';
            }
        }, 50);

        function setUpPage() {

        }

        function setUp() {
            form = document.getElementById('tfa_0');
        }

        // remove any remaining error message
        function tearDown() {

        }

        function testRecursiveConditional() {

            assertTrue(!!document.getElementById('tfa_2').className.match(/\boffstate\b/));
            assertTrue(!!document.getElementById('tfa_10').className.match(/\boffstate\b/));
            assertTrue(!!document.getElementById('tfa_12').className.match(/\boffstate\b/));
            assertTrue(!!document.getElementById('tfa_16').className.match(/\boffstate\b/));
            assertTrue(!!document.getElementById('tfa_17').className.match(/\boffstate\b/));

            // turn on parent (checkbox/radio)
            document.getElementById('tfa_4').checked = true;
            (new wFORMS.behaviors.condition.Trigger('#tfa_4')).trigger();

            assertFalse(!!document.getElementById('tfa_2').className.match(/\boffstate\b/));
            assertTrue(!!document.getElementById('tfa_10').className.match(/\boffstate\b/));

            // turn on nested (checkbox/radio)
            document.getElementById('tfa_7').checked = true;
            (new wFORMS.behaviors.condition.Trigger('#tfa_7')).trigger();

            assertFalse(!!document.getElementById('tfa_2').className.match(/\boffstate\b/));
            assertFalse(!!document.getElementById('tfa_10').className.match(/\boffstate\b/));

            // turn off parent (checkbox/radio)
            document.getElementById('tfa_4').checked = false;
            (new wFORMS.behaviors.condition.Trigger('#tfa_4')).trigger();
            assertTrue(!!document.getElementById('tfa_2').className.match(/\boffstate\b/));
            assertTrue(!!document.getElementById('tfa_10').className.match(/\boffstate\b/));

            // turn on parent (select)
            document.getElementById('tfa_21').selected = true;
            (new wFORMS.behaviors.condition.Trigger('#tfa_21')).trigger();
            assertFalse(!!document.getElementById('tfa_16').className.match(/\boffstate\b/));
            assertTrue(!!document.getElementById('tfa_17').className.match(/\boffstate\b/));

            // turn on nested (select)
            document.getElementById('tfa_19').selected = true;
            (new wFORMS.behaviors.condition.Trigger('#tfa_19')).trigger();
            assertFalse(!!document.getElementById('tfa_16').className.match(/\boffstate\b/));
            assertFalse(!!document.getElementById('tfa_17').className.match(/\boffstate\b/));

            // turn off parent
            document.getElementById('tfa_21').selected = false;
            (new wFORMS.behaviors.condition.Trigger('#tfa_21')).trigger();
            assertTrue(!!document.getElementById('tfa_16').className.match(/\boffstate\b/));
            assertTrue(!!document.getElementById('tfa_17').className.match(/\boffstate\b/));

        }
    </script>

</head>
<body class="default wFormWebPage">

    <div id="tfaContent">
        <div class="wFormContainer"  >

            <div class="">
                <div class="wForm" id="tfa_1-WRPR" dir="ltr">
                    <div class="codesection" id="code-tfa_1"></div>
                    <h3 class="wFormTitle" id="tfa_1-T">Test Recursive Conditionals</h3>
                    <form method="post" action="http://master.app/responses/processor" class="hintsBelow labelsAbove" id="tfa_1">
                        <div id="tfa_3-D" class="oneField    ">
                            <label id="tfa_3-L" for="tfa_3" class="label preField ">Trigger 1</label>
                            <br>
                            <div class="inputWrapper">
                                <span id="tfa_3" class="choices vertical ">
                                    <span class="oneChoice">
                                        <input type="radio" value="tfa_4" class="" id="tfa_4" name="tfa_3" data-conditionals="#tfa_2">
                                        <label class="label postField" id="tfa_4-L" for="tfa_4">Show Conditional 1</label>
                                    </span>
                                    <span class="oneChoice">
                                        <input type="radio" value="tfa_5" class="" id="tfa_5" name="tfa_3">
                                        <label class="label postField" id="tfa_5-L" for="tfa_5">Hide Conditional 1</label>
                                    </span>
                                </span>
                            </div>
                        </div>
                        <fieldset id="tfa_2" class="repeat section" data-condition="`#tfa_4`">
                            <legend id="tfa_2-L">Conditional 1</legend>
                            <div id="tfa_6-D" class="oneField    ">
                                <label id="tfa_6-L" for="tfa_6" class="label preField ">Trigger 2</label>
                                <br>
                                <div class="inputWrapper">
                                    <span id="tfa_6" class="choices vertical ">
                                        <span class="oneChoice">
                                            <input type="radio" value="tfa_7" class="" id="tfa_7" name="tfa_6" data-conditionals="#tfa_10">
                                            <label class="label postField" id="tfa_7-L" for="tfa_7">Show Conditional 2</label>
                                        </span>
                                        <span class="oneChoice">
                                            <input type="radio" value="tfa_8" class="" id="tfa_8" name="tfa_6">
                                            <label class="label postField" id="tfa_8-L" for="tfa_8">Hide Conditional 2</label>
                                        </span>
                                        <span class="oneChoice">
                                            <input type="radio" value="tfa_9" class="" id="tfa_9" name="tfa_6" data-conditionals="#tfa_12">
                                            <label class="label postField" id="tfa_9-L" for="tfa_9">Something else</label>
                                        </span>
                                    </span>
                                </div>
                            </div>
                            <fieldset id="tfa_12" class="section" data-condition="`#tfa_9`">
                                <legend id="tfa_12-L">Conditional 3</legend>
                                <div id="tfa_13-D" class="oneField    ">
                                    <label id="tfa_13-L" for="tfa_13" class="label preField ">Cond3</label>
                                    <br>
                                    <div class="inputWrapper">
                                        <input type="text" id="tfa_13" name="tfa_13" value="" placeholder="" class=""></div>
                                </div>
                            </fieldset>
                        </fieldset>
                        <fieldset id="tfa_10" class="section" data-condition="`#tfa_7`">
                            <legend id="tfa_10-L">Conditional 2</legend>
                            <div class="htmlSection" id="tfa_11">
                                <div class="htmlContent" id="tfa_11-HTML">Visible!</div>
                            </div>
                            <div id="tfa_14-D" class="oneField    ">
                                <label id="tfa_14-L" for="tfa_14" class="label preField ">Cond4</label>
                                <br>
                                <div class="inputWrapper">
                                    <input type="text" id="tfa_14" name="tfa_14" value="" placeholder="" class=""></div>
                            </div>
                        </fieldset>
                        <div id="tfa_15-D" class="oneField    ">
                            <label id="tfa_15-L" for="tfa_15" class="label preField ">Conditional 3 with Selects</label>
                            <br>
                            <div class="inputWrapper">
                                <select id="tfa_15" name="tfa_15" class="">
                                    <option value="">Please select...</option>
                                    <option value="tfa_21" id="tfa_21" data-conditionals="#tfa_16" class="">show</option>
                                    <option value="tfa_22" id="tfa_22" class="">hide</option>
                                </select>
                            </div>
                        </div>
                        <fieldset id="tfa_16" class="section" data-condition="`#tfa_21`">
                            <legend id="tfa_16-L">Conditional 3</legend>
                            <div id="tfa_18-D" class="oneField    ">
                                <label id="tfa_18-L" for="tfa_18" class="label preField ">Conditional 4</label>
                                <br>
                                <div class="inputWrapper">
                                    <select id="tfa_18" name="tfa_18" class="">
                                        <option value="">Please select...</option>
                                        <option value="tfa_19" id="tfa_19" data-conditionals="#tfa_17" class="">show</option>
                                        <option value="tfa_20" id="tfa_20" class="">hide</option>
                                    </select>
                                </div>
                            </div>
                        </fieldset>
                        <fieldset id="tfa_17" class="section empty" data-condition="`#tfa_19`">
                            <legend id="tfa_17-L">Conditional 4</legend>
                        </fieldset>
                        <div class="actions" id="tfa_1-A">
                            <input type="submit" class="primaryAction" value="Submit">
                        </div>
                        <input type="hidden" value="" name="tfa_switchedoff" id="tfa_switchedoff">
                    </form>
                </div>
            </div>


        </div>
    </div>

</body>
</html>